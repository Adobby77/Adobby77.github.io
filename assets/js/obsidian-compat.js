function processHighlights(){const e=document.querySelector(".post-content")||document.body;if(!e)return;const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),a=[];for(;t.nextNode();)a.push(t.currentNode);a.forEach(e=>{if(e.nodeValue&&e.nodeValue.includes("==")){const t=e.parentNode;if("CODE"===t.tagName||"PRE"===t.tagName)return;const a=/==([^=]+)==/g;if(a.test(e.nodeValue)){const i=document.createElement("span");i.innerHTML=e.nodeValue.replace(a,"<mark>$1</mark>"),t.replaceChild(i,e)}}})}function processCallouts(){document.querySelectorAll("blockquote").forEach(e=>{const t=e.textContent.trim(),a=t.match(/^\[! ?(\w+)\](?: (.*))?$/m);if(a&&t.startsWith("[!")){const t=a[1].toLowerCase(),i=a[2]||t.charAt(0).toUpperCase()+t.slice(1),o=document.createElement("div");o.className="obsidian-callout",o.setAttribute("data-type",t);const n=document.createElement("div");n.className="obsidian-callout-title";const s=document.createElement("span");s.className="obsidian-callout-icon",s.innerHTML=getIcon(t),n.appendChild(s),n.appendChild(document.createTextNode(i));const c=document.createElement("div");c.className="obsidian-callout-content";const l=e.querySelector("p");if(l){const e=document.createTreeWalker(l,NodeFilter.SHOW_TEXT);if(e.nextNode()){const t=e.currentNode;if(t.nodeValue.includes("[!")){const e=t.nodeValue.match(/^\[! ?(\w+)\](?: (.*))?/);if(e){const a=e[0].length;let i=t.nodeValue.substring(a);i.startsWith("\n")&&(i=i.substring(1)),t.nodeValue=i}}}""===l.textContent.trim()&&l.remove()}for(;e.firstChild;)c.appendChild(e.firstChild);o.appendChild(n),o.appendChild(c),e.parentNode.replaceChild(o,e)}})}function getIcon(e){return{note:'<i class="fa-solid fa-pencil"></i>',info:'<i class="fa-solid fa-circle-info"></i>',todo:'<i class="fa-solid fa-circle-check"></i>',tip:'<i class="fa-solid fa-fire-flame-curved"></i>',success:'<i class="fa-solid fa-check"></i>',question:'<i class="fa-solid fa-circle-question"></i>',warning:'<i class="fa-solid fa-triangle-exclamation"></i>',failure:'<i class="fa-solid fa-xmark"></i>',danger:'<i class="fa-solid fa-radiation"></i>',bug:'<i class="fa-solid fa-bug"></i>',example:'<i class="fa-solid fa-list"></i>',quote:'<i class="fa-solid fa-quote-left"></i>'}[e]||'<i class="fa-solid fa-pencil"></i>'}document.addEventListener("DOMContentLoaded",function(){processHighlights(),processCallouts()});