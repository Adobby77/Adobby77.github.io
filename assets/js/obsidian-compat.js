function processHighlights(){const e=document.querySelector(".post-content")||document.body;if(!e)return;const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=[];for(;t.nextNode();)i.push(t.currentNode);i.forEach(e=>{if(e.nodeValue&&e.nodeValue.includes("==")){const t=e.parentNode;if("CODE"===t.tagName||"PRE"===t.tagName)return;if(t.closest("code")||t.closest("pre"))return;const i=/==([^=]+)==/g;if(i.test(e.nodeValue)){document.createElement("span");const n=document.createDocumentFragment();let s=e.nodeValue;i.lastIndex=0;const a=s.split(i);for(let e=0;e<a.length;e++)if(e%2==0)a[e]&&n.appendChild(document.createTextNode(a[e]));else{const t=document.createElement("mark");t.textContent=a[e],n.appendChild(t)}t.replaceChild(n,e)}}})}function processCallouts(){document.querySelectorAll("blockquote").forEach(e=>{const t=e.textContent.trim().match(/^\[!\s*(\w+)\s*\]/);if(!t)return;const i=t[1].toLowerCase();let n=e.firstElementChild;if(!n&&e.firstChild)return;if("P"!==n.tagName&&"DIV"!==n.tagName)return;let s=n.innerHTML;const a=/<br\s*\/?>|\n/;let o=s.search(a),l="",c="";if(-1!==o){l=s.substring(0,o);const e=s.match(a);c=s.substring(o+e[0].length),n.innerHTML=c}else l=s,n.remove();const d=document.createElement("div");d.innerHTML=l;const r=d.textContent.match(/^\[!\s*(\w+)\s*\](?:\s+(.*))?$/);let f=i.charAt(0).toUpperCase()+i.slice(1);r&&r[2]&&(f=r[2]);const u=document.createElement("div");u.className="obsidian-callout",u.setAttribute("data-type",i);const m=document.createElement("div");m.className="obsidian-callout-title";const p=document.createElement("span");p.className="obsidian-callout-icon",p.innerHTML=getIcon(i),m.appendChild(p),m.appendChild(document.createTextNode(f));const h=document.createElement("div");if(h.className="obsidian-callout-content",-1!==o)for(;e.firstChild;)h.appendChild(e.firstChild);else for(;e.firstChild;)h.appendChild(e.firstChild);u.appendChild(m),u.appendChild(h),e.parentNode.replaceChild(u,e)})}function getIcon(e){return{note:'<i class="fa-solid fa-pencil"></i>',info:'<i class="fa-solid fa-circle-info"></i>',todo:'<i class="fa-solid fa-circle-check"></i>',tip:'<i class="fa-solid fa-fire-flame-curved"></i>',success:'<i class="fa-solid fa-check"></i>',question:'<i class="fa-solid fa-circle-question"></i>',warning:'<i class="fa-solid fa-triangle-exclamation"></i>',failure:'<i class="fa-solid fa-xmark"></i>',danger:'<i class="fa-solid fa-radiation"></i>',bug:'<i class="fa-solid fa-bug"></i>',example:'<i class="fa-solid fa-list"></i>',quote:'<i class="fa-solid fa-quote-left"></i>'}[e]||'<i class="fa-solid fa-pencil"></i>'}document.addEventListener("DOMContentLoaded",function(){processHighlights(),processCallouts()});